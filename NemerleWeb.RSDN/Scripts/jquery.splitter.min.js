(function(e){var t=0;e.fn.splitter=function(n){n=n||{};return this.each(function(){function i(){return e.browser.msie&&parseInt(e.browser.version)<9}function s(e){b.removeClass(p.barStateClasses).addClass(e)}function o(t){if(t.which!=1)return;b.removeClass(p.barHoverClass);if(p.outline){r=r||b.clone(false).insertAfter(m);b.removeClass(p.barDockedClass)}s(p.barActiveClass);v.css("-webkit-user-select","none").find("iframe").addClass(p.iframeClass);m._posSplit=m[0][p.pxSplit]-t[p.eventPos];e(document).bind("mousemove"+p.eventNamespace,u).bind("mouseup"+p.eventNamespace,a)}function u(e){var t=m._posSplit+e[p.eventPos],n=Math.max(0,Math.min(t,d._DA-b._DA)),r=Math.max(m._min,d._DA-g._max,Math.min(t,m._max,d._DA-b._DA-g._min));if(p.outline){if(p.dockPane==m&&t<Math.max(m._min,b._DA)||p.dockPane==g&&t>Math.min(t,m._max,d._DA-b._DA-g._min)){b.addClass(p.barDockedClass).css(p.origin,n)}else{b.removeClass(p.barDockedClass).css(p.origin,r)}b._DA=b[0][p.pxSplit]}else f(t);s(t==r?p.barActiveClass:p.barLimitClass)}function a(t){s(p.barNormalClass);b.addClass(p.barHoverClass);var n=m._posSplit+t[p.eventPos];if(p.outline){r&&r.remove();r=null;f(n)}v.css("-webkit-user-select","text").find("iframe").removeClass(p.iframeClass);e(document).unbind("mousemove"+p.eventNamespace+" mouseup"+p.eventNamespace)}function f(e){b._DA=b[0][p.pxSplit];if(p.dockPane==m&&e<Math.max(m._min,b._DA)||p.dockPane==g&&e>Math.min(e,m._max,d._DA-b._DA-g._min)){b.addClass(p.barDockedClass);b._DA=b[0][p.pxSplit];e=p.dockPane==m?0:d._DA-b._DA;if(b._pos==null)b._pos=m[0][p.pxSplit]}else{b.removeClass(p.barDockedClass);b._DA=b[0][p.pxSplit];b._pos=null;e=Math.max(m._min,d._DA-g._max,Math.min(e,m._max,d._DA-b._DA-g._min))}b.css(p.origin,e).css(p.fixed,d._DF);m.css(p.origin,0).css(p.split,e).css(p.fixed,d._DF);g.css(p.origin,e+b._DA).css(p.split,d._DA-b._DA-e).css(p.fixed,d._DF);if(!i())v.triggerHandler("resize")}function l(e,t){var n=0;for(var r=1;r<arguments.length;r++)n+=Math.max(parseInt(e.css(arguments[r]),10)||0,0);return n}function c(e){d._DF=d[0][p.pxFixed]-d._PBF;d._DA=d[0][p.pxSplit]-d._PBA;if(d._DF<=0||d._DA<=0)return;if(d._oldW==d.width()&&d._oldH==d.height())return;d._oldW=d.width();d._oldH=d.height();f(!isNaN(e)?e:!(p.sizeRight||p.sizeBottom)?m[0][p.pxSplit]:d._DA-g[0][p.pxSplit]-b._DA);s(p.barNormalClass)}if(e(this).attr("data-splitter-initialized"))return;var r;var h=(n.splitHorizontal?"h":n.splitVertical?"v":n.type)||"v";var p=e.extend({splitterClass:"splitter ui-widget ui-widget-content",paneClass:"splitter-pane",barClass:"splitter-bar",barNormalClass:"ui-state-default",barHoverClass:"ui-state-hover",barActiveClass:"ui-state-highlight",barLimitClass:"ui-state-error",iframeClass:"splitter-iframe-hide",eventNamespace:".splitter"+ ++t,pxPerKey:8,tabIndex:0,accessKey:""},{v:{keyLeft:39,keyRight:37,cursor:"e-resize",barStateClass:"splitter-bar-vertical",barDockedClass:"splitter-bar-vertical-docked"},h:{keyTop:40,keyBottom:38,cursor:"n-resize",barStateClass:"splitter-bar-horizontal",barDockedClass:"splitter-bar-horizontal-docked"}}[h],n,{v:{type:"v",eventPos:"pageX",origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}}[h]);p.barStateClasses=[p.barNormalClass,p.barHoverClass,p.barActiveClass,p.barLimitClass].join(" ");var d=e(this).css({position:"relative"}).addClass(p.splitterClass).attr("data-splitter-initialized",true);var v=e(">*",d[0]).addClass(p.paneClass).css({position:"absolute","z-index":"1","-moz-outline-style":"none"});var m=e(v[0]),g=e(v[1]);p.dockPane=p.dock&&(/right|bottom/.test(p.dock)?g:m);var y=e('<a href="javascript:void(0)"></a>').attr({accessKey:p.accessKey,tabIndex:p.tabIndex,title:p.splitbarClass}).bind((e.browser.opera?"click":"focus")+p.eventNamespace,function(){this.focus();b.addClass(p.barActiveClass)}).bind("keydown"+p.eventNamespace,function(e){var t=e.which||e.keyCode;var n=t==p["key"+p.side1]?1:t==p["key"+p.side2]?-1:0;if(n)f(m[0][p.pxSplit]+n*p.pxPerKey,false)}).bind("blur"+p.eventNamespace,function(){b.removeClass(p.barActiveClass)});var b=e("<div></div>").insertAfter(m).addClass(p.barClass).addClass(p.barStateClass).append(y).attr({unselectable:"on"}).css({position:"absolute","user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","z-index":"100"}).bind("mousedown"+p.eventNamespace,o).bind("mouseover"+p.eventNamespace,function(){e(this).addClass(p.barHoverClass)}).bind("mouseout"+p.eventNamespace,function(){e(this).removeClass(p.barHoverClass)});if(/^(auto|default|)$/.test(b.css("cursor")))b.css("cursor",p.cursor);b._DA=b[0][p.pxSplit];d._PBF=l(d,"border"+p.side3+"Width","border"+p.side4+"Width");d._PBA=l(d,"border"+p.side1+"Width","border"+p.side2+"Width");m._pane=p.side1;g._pane=p.side2;e.each([m,g],function(){this._splitter_style=this.style;this._min=p["min"+this._pane]||l(this,"min-"+p.split);this._max=p["max"+this._pane]||l(this,"max-"+p.split)||9999;this._init=p["size"+this._pane]===true?parseInt(e.css(this[0],p.split),10):p["size"+this._pane]});var w=m._init;if(!isNaN(g._init))w=d[0][p.pxSplit]-d._PBA-g._init-b._DA;if(p.cookie){if(!e.cookie)alert("jQuery.splitter(): jQuery cookie plugin required");w=parseInt(e.cookie(p.cookie),10);e(window).bind("unload"+p.eventNamespace,function(){var t=String(b.css(p.origin));e.cookie(p.cookie,t,{expires:p.cookieExpires||365,path:p.cookiePath||document.location.pathname})})}if(isNaN(w))w=Math.round((d[0][p.pxSplit]-d._PBA-b._DA)/2);if(p.anchorToWindow)p.resizeTo=window;if(p.resizeTo){d._hadjust=l(d,"borderTopWidth","borderBottomWidth","marginBottom");d._hmin=Math.max(l(d,"minHeight"),20);e(window).bind("resize"+p.eventNamespace,function(){var t=d.offset().top;var n=e(p.resizeTo).height();d.css("height",Math.max(n-t-d._hadjust,d._hmin)+"px");if(!i())d.triggerHandler("resize")}).triggerHandler("resize"+p.eventNamespace)}else if(p.resizeToWidth&&!i()){e(window).bind("resize"+p.eventNamespace,function(){c()})}if(p.dock){d.bind("toggleDock"+p.eventNamespace,function(){var e=p.dockPane[0][p.pxSplit];d.triggerHandler(e?"dock":"undock")}).bind("dock"+p.eventNamespace,function(){var e=m[0][p.pxSplit];if(!e)return;b._pos=e;var t={};t[p.origin]=p.dockPane==m?0:d[0][p.pxSplit]-d._PBA-b[0][p.pxSplit];b.animate(t,p.dockSpeed||1,p.dockEasing,function(){b.addClass(p.barDockedClass);f(t[p.origin])})}).bind("undock"+p.eventNamespace,function(){var e=p.dockPane[0][p.pxSplit];if(e)return;var t={};t[p.origin]=b._pos+"px";b.removeClass(p.barDockedClass).animate(t,p.undockSpeed||p.dockSpeed||1,p.undockEasing||p.dockEasing,function(){f(b._pos);b._pos=null})});if(p.dockKey)e('<a title="'+p.splitbarClass+' toggle dock" href="javascript:void(0)"></a>').attr({accessKey:p.dockKey,tabIndex:-1}).appendTo(b).bind(e.browser.opera?"click":"focus",function(){d.triggerHandler("toggleDock");this.blur()});b.bind("dblclick",function(){d.triggerHandler("toggleDock")})}d.bind("destroy"+p.eventNamespace,function(){e([window,document]).unbind(p.eventNamespace);b.unbind().remove();v.removeClass(p.paneClass);d.removeClass(p.splitterClass).add(v).unbind(p.eventNamespace).attr("style",function(e){return this._splitter_style||""});d=b=y=v=m=g=p=n=null}).bind("resize"+p.eventNamespace,function(e,t){c(t)}).trigger("resize",[w])})}})(jQuery)
