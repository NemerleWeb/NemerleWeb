using Nemerle.Collections;
using Nemerle.Xml;
using Nemerle.Extensions;
using Nemerle.ComputationExpressions;

using System;
using System.Linq;
using System.Console;
using System.Collections.Generic;
using System.Xml.Linq;

using NemerleWeb;

module Program
{
  Main() : void
  {
    def result = nweb Test(1);
    WriteLine(result);
    _ = Console.ReadKey();
  }
}


[Unit]
public class Test
{  
  public this(pos : int)
  {    
    def pos =
    {
      def pos = 
      {
        def f(pos)
        {
          def g(pos)
          {
            pos + 2
          }
          
          //_ = g(0);
          g(pos + 3)          
        }  
        //_ = f(0);
        f(pos)
      }

      pos + 1
    }    
  }
    
  [Html]
  public View() : string
  {
    <# <div></div> #>
  }
}