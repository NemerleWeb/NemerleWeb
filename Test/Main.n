using Nemerle.Collections;
using Nemerle.Xml;
using Nemerle.Extensions;
using Nemerle.ComputationExpressions;

using System;
using System.Text;
using System.Linq;
using System.Console;
using System.Collections.Generic;
using System.Xml.Linq;

using NemerleWeb;

module Program
{
  Main() : void
  {
    def result = nweb Test();
    
    foreach (s in NWebData.GetAllScriptNames())
      WriteLine(NWebData.GetScript(s));
    
    WriteLine(result);
    _ = Console.ReadKey();
  }
}

[Unit]
class P
{
  public static F() : int { 1 }
  public static F(_ : int) : int { 2 }
  public static F(_ : int, _ : int) : int { 3 }
  
  public new ToString(_ : int) : string { "" }
  
  public X : int -> string;
  public this(){
     X = this.ToString;
  }
  
  public static Y : int -> int = F;
}

[Unit]
public class Test
{      
  X() : void { _ = P.F(); }
  
  Y() : void { _ = P.F(1); }
  
  Z() : void { _ = P.F(1, 2); }
  
  U() : void
  {
    def f = P.F;
    _ = f(1, 2);
  }
  
  V() :void
  {
    def p = P();
    _ = p.X(1);
    _ = P.Y(1);
    
    _ = (p : object).ToString();
    _ = p.ToString(3);
  }

  [Html]
  public View() : string
  {
    <# <div></div> #>
  }
}